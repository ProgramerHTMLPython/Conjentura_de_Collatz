<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <!-- üîπ Hace que el sitio sea responsive -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üßÆ La Conjetura de Collatz</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: white;
      background: linear-gradient(to bottom, #151A28, #0E111B);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h1 {
      margin-top: 10px;
      font-size: clamp(1.2rem, 2.5vw, 1.8rem); /* üîπ Escalable */
      text-align: center;
      max-width: 900px;
    }
    .info {
      max-width: 800px;
      background: rgba(255, 255, 255, 0.05);
      padding: 15px 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      font-size: clamp(0.9rem, 1.5vw, 1rem); /* üîπ Texto flexible */
      line-height: 1.6;
    }
    .input-box {
      margin: 15px 0;
      text-align: center;
    }
    input {
      padding: 8px;
      font-size: clamp(0.9rem, 1.5vw, 1rem); /* üîπ Escalable */
      text-align: center;
      border: none;
      border-radius: 6px;
      outline: none;
      width: clamp(140px, 25vw, 200px); /* üîπ Se adapta */
    }
    button {
      padding: 8px 14px;
      margin-left: 10px;
      font-size: clamp(0.9rem, 1.5vw, 1rem);
      font-weight: bold;
      color: white;
      background: black;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #333;
    }
    .resultado {
      max-width: 800px;
      margin-top: 20px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.07);
      border-radius: 12px;
      white-space: pre-wrap;
      word-wrap: break-word;
      font-size: clamp(0.8rem, 1.3vw, 0.95rem);
    }
  </style>
</head>
<body>
  <h1>üîç "La Conjetura de Collatz: el problema matem√°tico m√°s dif√≠cil de resolver"</h1>

  <div class="info">
    <p><b>Explorando la Conjetura de Collatz: el misterio matem√°tico del 3n + 1</b></p>
    <p>La <b>conjetura de Collatz</b>, tambi√©n conocida como el <i>problema 3n + 1</i>, es un enigma matem√°tico que desaf√≠a a los matem√°ticos desde 1937. La regla es sencilla:</p>
    <ul>
      <li>Si un n√∫mero entero positivo es par, se divide entre 2.</li>
      <li>Si es impar, se multiplica por 3 y se suma 1.</li>
    </ul>
    <p>El proceso se repite hasta alcanzar el n√∫mero 1. Sorprendentemente, <b>todos los n√∫meros probados hasta la fecha terminan en 1</b>, incluyendo cifras gigantescas como 2<sup>68</sup> (m√°s de 295 quintillones).</p>
    <p>A pesar de su aparente simplicidad, demostrar que esto ocurre para <b>todos los enteros positivos</b> es extremadamente dif√≠cil. Algunos n√∫meros pueden aumentar a cifras astron√≥micas antes de descender, haciendo imposible un an√°lisis exhaustivo por fuerza bruta.</p>
    <p><b>Datos curiosos:</b></p>
    <ul>
      <li>La secuencia de Collatz ha sido verificada para m√°s de 10<sup>20</sup> n√∫meros.</li>
      <li>Algunos n√∫meros, como 27, producen secuencias sorprendentemente largas con oscilaciones inesperadas.</li>
      <li>Aunque nunca se ha demostrado formalmente, su simplicidad y la constancia de los resultados la convierten en un cl√°sico misterio matem√°tico.</li>
    </ul>
    <p>En resumen, la conjetura de Collatz es <b>f√°cil de entender, pero casi imposible de probar</b>, fascinando a matem√°ticos y curiosos de todo el mundo.</p>
  </div>

  <div class="input-box">
    <label for="numero">Ingresa un n√∫mero: </label>
    <input type="text" id="numero" placeholder="Ej: 27, 2^68, 2‚Å∂‚Å∏">
    <button onclick="generarSecuencia()">Generar Secuencia</button>
  </div>

  <div class="resultado" id="resultado"></div>

  <script>
    const MAX_LIMIT = 2n ** 68n; // l√≠mite m√°ximo (BigInt)

    const superindiceMapa = {
      "‚Å∞": "0", "¬π": "1", "¬≤": "2", "¬≥": "3", "‚Å¥": "4",
      "‚Åµ": "5", "‚Å∂": "6", "‚Å∑": "7", "‚Å∏": "8", "‚Åπ": "9"
    };

    function parseEntrada(valor) {
      valor = valor.trim();

      if (valor.includes("^")) {
        const [base, exp] = valor.split("^").map(x => x.trim());
        return BigInt(base) ** BigInt(exp);
      }

      let base = "";
      let exp = "";
      for (let char of valor) {
        if (char in superindiceMapa) {
          exp += superindiceMapa[char];
        } else {
          base += char;
        }
      }
      if (exp) {
        return BigInt(base) ** BigInt(exp);
      }

      return BigInt(valor);
    }

    function collatzSequence(n) {
      let sequence = [n];
      while (n !== 1n) {
        n = (n % 2n === 0n) ? n / 2n : n * 3n + 1n;
        sequence.push(n);
      }
      return sequence;
    }

    function generarSecuencia() {
      const entrada = document.getElementById("numero").value;
      const salida = document.getElementById("resultado");

      let num;
      try {
        num = parseEntrada(entrada);
      } catch {
        salida.textContent = "‚ö†Ô∏è Ingresa un n√∫mero v√°lido (ej: 27, 2^68, 2‚Å∂‚Å∏).";
        return;
      }

      if (num <= 0n) {
        salida.textContent = "‚ö†Ô∏è Ingresa un n√∫mero entero positivo.";
        return;
      }

      if (num > MAX_LIMIT) {
        salida.textContent = "‚ö†Ô∏è El n√∫mero no puede ser mayor a 2^68.";
        return;
      }

      const secuencia = collatzSequence(num);
      const pasos = secuencia.length - 1;
      const maximo = secuencia.reduce((a, b) => a > b ? a : b, 0n);

      let texto = `üî¢ N√∫mero inicial: ${num}\nüìà Pasos: ${pasos}\nüìä M√°ximo alcanzado: ${maximo}\n\n`;
      texto += secuencia.join(" ‚Üí ");

      const ultimaParte = secuencia.slice(-3).map(n => n.toString());
if (ultimaParte.join(" ‚Üí ") === "4 ‚Üí 2 ‚Üí 1") {
  texto += "\n\n‚úÖ Aqu√≠ se acaba: 4 ‚Üí 2 ‚Üí 1";
  texto += "\n‚ÑπÔ∏è ¬øPor qu√©?: La secuencia siempre termina en el ciclo 4 ‚Üí 2 ‚Üí 1, que se repite indefinidamente.";
  texto += "\nEsto ocurre porque al llegar a 1, la regla dice que como es impar: 1 √ó 3 + 1 = 4.";
  texto += "\nLuego, 4 √∑ 2 = 2 y despu√©s 2 √∑ 2 = 1.";
  texto += "\nAs√≠ se reinicia el mismo ciclo una y otra vez sin generar n√∫meros nuevos.";
}



      salida.textContent = texto;
    }
  </script>
</body>
</html>
